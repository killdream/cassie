require.define("/cassie.js",function(a,b,c,d,e){function h(a,b){return a.callbacks[b]||(a.callbacks[b]=[])}function i(a){return function(b){return this.on(a,b)}}var f=a("boo").Base,g=[].slice,j=f.derive({init:function(){return this.callbacks={},this.flush_queue=[],this.value=null,this.timer=null,this.default_event="done",this},on:function(b,c){function d(a){var d=h(a,b);return c&&d.flushed?c.apply(a,a.value):null}function e(a){return c?h(a,b).push(c):null}return this.default_event=b,this.value?d(this):e(this),this},then:function(b){return this.on(this.default_event,b)},flush:function(b){function d(a){a&&c.flush_queue.push(a)}function e(a){var b=h(c,a);b.forEach(function(a){a.apply(c,c.value)}),b.length=0,b.flushed=!0}function f(){c.flush_queue.forEach(e)}var c=this;return this.value?b?e(b):f():d(b),this},done:function(b){return this.value||(this.clear_timer(),this.flush("done"),this.value=g.call(b),this.flush()),this},fail:function(){return this.flush("failed").done(arguments)},bind:function(){return this.flush("ok").done(arguments)},forget:function(){return this.flush("forgotten").fail("forgotten")},timeout:function(b){return this.clear_timer(),this.timer=setTimeout(function(){this.flush("timeouted").fail("timeouted")}.bind(this),b*1e3),this},clear_timer:function(){return clearTimeout(this.timer),this.timer=null,this},ok:i("ok"),failed:i("failed"),timeouted:i("timeouted"),forgotten:i("forgotten")});b.exports={Promise:j,register:i,internals:{get_queue:h}}}),require("/cassie.js");